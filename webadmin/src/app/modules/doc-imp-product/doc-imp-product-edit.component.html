<div class="main-panel">
    <div class="content">
        <div class="page-inner">
            <form #editForm="ngForm" class="form-signin">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="" style="position: fixed;top:60px;background-color: #f9fbfd;height: 39px;width: 100%;z-index: 1;"></div>
                            <div class="" style="position: fixed;top:70px;background-color: #1572e8;height: 39px;width: 100%;z-index: 1;">
                                <div class="d-flex align-items-center">
                                    <button *ngIf="disabledInput"  style="padding: 8px;margin-bottom: 4px;"  class="btn btn-primary" disabled>
                                        <i style="margin: 2px;" class="fa fa-save"></i>
                                        Lưu
                                    </button>
                                    <button (click)="onSave()" *ngIf="!disabledInput" style="padding: 8px;margin-bottom: 4px;"  class="btn btn-primary" >
                                        <i style="margin: 2px;" class="fa fa-save"></i>
                                        Lưu
                                    </button>
                                    <!-- <button (click)="onAccess()" *ngIf="inputModel?.status == 'APPROVE' && editPageState == EditPageState.add" style="padding: 8px;margin-bottom: 4px;"  class="btn btn-primary" disabled>
                                        <i style="margin: 2px;" class="fa fa-check"></i>
                                        Xác nhận
                                    </button>
                                    <button (click)="onAccess()" *ngIf="inputModel?.status != 'APPROVE' && editPageState != EditPageState.add" style="padding: 8px;margin-bottom: 4px;"  class="btn btn-primary" >
                                        <i style="margin: 2px;" class="fa fa-check"></i>
                                        Xác nhận
                                    </button> -->
                                </div>
                            </div>
                            <div class="page-header" style="padding-top: 19px;">
                                <ul class="breadcrumbs">
                                    <li class="" style=" border-right: 1px solid #575962; margin-right: 5px;margin-left: 5px;">
                                        <a style="margin-right: 5px;margin-left: 5px;" href="#">
                                            <i class="flaticon-home"></i>
                                            Trang chủ
                                        </a>
                                    </li>
                                    <li class="nav-item" style=" border-right: 1px solid #575962; margin-right: 5px;margin-left: 5px;">
                                        <a routerLink="/app/doc-imp-product" routerLinkActive="active" ariaCurrentWhenActive="page" style="margin-right: 5px;" href="#">Hóa đơn nhập</a>
                                    </li>
                                    <li class="nav-item">
                                        <a>{{title}}</a>
                                    </li>
                                </ul>
                            </div> 
                            <div>
                                <p *ngIf="titleinfo" style="    background-color: #00ce49;
                                color: white;
                                border-radius: 4px;
                                padding: 5px;">{{titleinfo}}</p>
                                <p *ngIf="titleerorr" style="    background-color: red;
                                color: white;
                                border-radius: 4px;
                                padding: 5px;">{{titleerorr}}</p>
                                <!-- <div class="card-title">{{title}}</div> -->
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="doC_IMP_PRODUCT_CODE">Mã hoá đơn</label>
                                            <input style="color:black; font-weight: bold;"  disabled="{{true}}" id="doC_IMP_PRODUCT_CODE" name="doC_IMP_PRODUCT_CODE" [(ngModel)]="inputModel!.doC_IMP_PRODUCT_CODE" 
                                            type="text" class="form-control form-control" placeholder="Mã hoá đơn">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="deliver" class="required">Người giao</label>
                                            <input style="color:black; font-weight: bold;" disabled="{{disabledInput}}" required
                                            #deliver="ngModel"
                                            id="deliver" name="deliver" [(ngModel)]="inputModel!.deliver" type="text" 
                                            class="form-control form-control" placeholder="Người giao">
                                            <div class="error-message" *ngIf="deliver.invalid && isShowError">
                                                <span>Người giao không được để trống</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="warehousE_ID" class="required">Kho</label>
                                            <select style="color:black; font-weight: bold;" disabled="{{disabledInput}}" required #warehousE_ID="ngModel" class="form-control" [(ngModel)]="inputModel!.warehousE_ID" 
                                            id="warehousE_ID" name="warehousE_ID">
                                                <option *ngFor="let item of lstWarehouse" value="{{item.warehousE_ID}}">{{item.warehousE_NAME}}</option>
                                            </select>
                                            <div class="error-message" *ngIf="warehousE_ID.invalid && isShowError">
                                                <span>Kho không được để trống</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="creatE_DATE">Ngày tạo</label>
                                            <input style="color:black; font-weight: bold;" disabled="{{true}}" id="creatE_DATE" name="creatE_DATE" [(ngModel)]="dateTime" 
                                            type="datetime-local" class="form-control form-control" placeholder="Ngày tạo">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="receiveR_NAME">Người nhận</label>
                                            <input style="color:black; font-weight: bold;" disabled="{{true}}" id="receiveR_NAME" name="receiveR_NAME" [(ngModel)]="inputModel!.receiveR_NAME" 
                                            type="text" class="form-control form-control" placeholder="Người nhận">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="total">Tổng tiền</label>
                                            <input style="color:black; font-weight: bold;" disabled="{{true}}" id="total" name="total" 
                                            [(ngModel)]="total" type="text" 
                                            class="form-control form-control" placeholder="Tổng tiền">
                                        </div>
                                    </div>
                                        <!-- <div class="form-group">
                                            <label for="creatE_DATE">Ngày giao</label>
                                            <input disabled="{{disabledInput}}" id="creatE_DATE" name="creatE_DATE" 
                                            [(ngModel)]="inputModel!.creatE_DATE" type="datetime-local" class="form-control form-control" placeholder="Ngày bắt đầu giao">
                                        </div> -->
                                </div>
                            </div>
                        
                            <div class="card-action">
                                <div class="row">
                                    <div class="col-md-4">
                                        <strong style="font-size: 20px;">Danh sách sản phẩm</strong>
                                    </div>
                                    <div class="col-md-6"></div>
                                    <div class="col-md-2">
                                        <button (click)="searchModal()" data-toggle="modal" data-target="#addRowModal" *ngIf="!disabledInput" style="font-size: 17px;margin-right: 3px;" class="btn btn-primary" >
                                           +
                                        </button>
                                        <button (click)="onDeleteRowCheck()" *ngIf="!disabledInput" style="font-size: 17px;margin-right: 3px;" class="btn btn-danger" >
                                            x
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table id="add-row" class="display table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th><input *ngIf="disabledInput" disabled type="checkbox" (change)="onChangeCheckboxAll()" [checked]="checkAll"></th>
                                                <th><input *ngIf="!disabledInput" type="checkbox" (change)="onChangeCheckboxAll()" [checked]="checkAll"></th>
                                                <th>Mã sản phẩm</th>
                                                <th>Tên sản phẩm</th>
                                                <th>Số lượng</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of listInvoiceDt;let in = index">
                                                <td>
                                                    <input *ngIf="disabledInput" disabled type="checkbox" (change)="onChangeCheckbox(in)" [checked]="item.checkbox">
                                                </td>
                                                <td>
                                                    <input *ngIf="!disabledInput" type="checkbox" (change)="onChangeCheckbox(in)" [checked]="item.checkbox">
                                                </td>
                                                <td>{{item.producT_CODE}}</td>
                                                <td>
                                                    <input *ngIf="!disabledInput" style="height: 45px !important;" [(ngModel)] ="item.producT_NAME" name="producT_NAME{{in}}" 
                                                    type="text" class="form-control" placeholder="Tên sản phẩm"/>
                                                    <span *ngIf="disabledInput">{{item.producT_NAME}}</span>
                                                </td>
                                                <td>
                                                    <input *ngIf="!disabledInput" style="height: 45px !important;" [(ngModel)] ="item.quantity" name="quantity{{in}}" 
                                                    (change)="onChangeQuantity(in, item.quantity)"
                                                    type="number" class="form-control" placeholder="Số lượng"/>
                                                    <span *ngIf="disabledInput">{{item.quantity}}</span>
                                                </td>
                                                <td>
                                                    <input *ngIf="!disabledInput" style="height: 45px !important;" [(ngModel)] ="item.price" name="price{{in}}" 
                                                    (change)="onChangePrice(in, item.price)"
                                                    type="number" class="form-control" placeholder="Đơn giá"/>
                                                    <span *ngIf="disabledInput">{{formatCurrency(item.price)}}</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-md-8"></div>
                                    <div class="col-md-4">
                                        <input *ngIf="!disabledInput" class="custom-file-input-hmh btn btn-primary" style="margin-left: 15px;width: 114px;margin-right: 3px;" type="file" (change)="ImportExcel($event)">
                                        <button (click)="onDownloadFileImport()" *ngIf="!disabledInput" style="font-size: 17px;" class="btn btn-primary" >
                                            Tải file mẫu import
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- <footer class="footer">
        <div class="container-fluid">
            <nav class="pull-left">
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.themekita.com">
                            ThemeKita
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            Help
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            Licenses
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="copyright ml-auto">
                2018, made with <i class="fa fa-heart heart text-danger"></i> by <a href="https://www.themekita.com">ThemeKita</a>
            </div>
        </div>
    </footer> -->
</div>
<!-- Modal -->
<div class="modal fade" id="addRowModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="left: -350px;width: 250%;">
            <div class="modal-header no-bd">
                <h5 class="modal-title">
                    <span class="fw-mediumbold">Tìm kiếm thông tin sản phẩm</span>
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- <p class="small">Vui lòng nhập đầy đủ thông tin bên dưới để thêm</p> -->
                <form #addForm="ngForm" class="form-add">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="producT_CODE">Mã sản phẩm</label>
                                <input [(ngModel)] ="filterInput.producT_CODE" id="producT_CODE" name="producT_CODE" type="text" class="form-control" placeholder="Mã sản phẩm" required/>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="producT_NAME">Tên sản phẩm</label>
                                <input [(ngModel)] ="filterInput.producT_NAME" id="producT_NAME" name="producT_NAME" type="text" class="form-control" placeholder="Tên sản phẩm" required/>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="producT_TYPE_ID">Loại sản phẩm</label>
                                <select #producT_TYPE_ID="ngModel" class="form-control" [(ngModel)]="filterInput!.producT_TYPE_ID" id="producT_TYPE_ID" name="producT_TYPE_ID">
                                    <option *ngFor="let item of listProductType" value="{{item.producT_TYPE_ID}}">{{item.producT_TYPE_NAME}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <strong style="font-size: 20px;">Danh sách sản phẩm</strong>
                    <div class="table-responsive">
                        <table id="add-row" class="display table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" (change)="onChangeCheckboxAllModal()" [checked]="checkAllModal"></th>
                                    <th>Mã sản phẩm</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Loại sản phẩm</th>
                                    <th>Nhà cung cấp</th>
                                    <th>Đơn giá</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of listProducts;let in = index">
                                    <td><input type="checkbox" (change)="onChangeCheckboxModal(in)" [checked]="item.checkbox"></td>
                                    <td>{{item.producT_CODE}}</td>
                                    <td>{{item.producT_NAME}}</td>
                                    <td>{{item.producT_TYPE_NAME}}</td>
                                    <td>{{item.supplieR_NAME}}</td>
                                    <td>{{formatCurrency(item.price)}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer no-bd">
                        <button (click)="searchModal()" class="btn btn-primary">Tìm kiếm</button>
                        <button class="close" data-dismiss="modal" aria-label="Close" type="submit" id="addForm" (click)="onSubmitModal()" class="btn btn-primary">Thêm</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Đóng</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>