USE [master]
GO
/****** Object:  Database [DB_QUANLYBANHANG]    Script Date: 10/04/2023 2:53:53 AM ******/
CREATE DATABASE [DB_QUANLYBANHANG]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'DB_QUANLYBANHANG', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL16.MSSQLSERVER01\MSSQL\DATA\DB_QUANLYBANHANG.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'DB_QUANLYBANHANG_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL16.MSSQLSERVER01\MSSQL\DATA\DB_QUANLYBANHANG_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT, LEDGER = OFF
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET COMPATIBILITY_LEVEL = 150
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [DB_QUANLYBANHANG].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET ARITHABORT OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET  ENABLE_BROKER 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET RECOVERY FULL 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET  MULTI_USER 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET DB_CHAINING OFF 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET ACCELERATED_DATABASE_RECOVERY = OFF  
GO
EXEC sys.sp_db_vardecimal_storage_format N'DB_QUANLYBANHANG', N'ON'
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET QUERY_STORE = OFF
GO
USE [DB_QUANLYBANHANG]
GO
/****** Object:  UserDefinedFunction [dbo].[GEN_ID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[GEN_ID] (@NAME_TABLE VARCHAR(10))
RETURNS VARCHAR(15)
AS
BEGIN
	DECLARE @CURVALUE INT = 0,@ID_GEN VARCHAR(15)
	IF(@NAME_TABLE = 'AREA')
	BEGIN
		SELECT TOP 1 @CURVALUE = RIGHT(AREA_ID,7) + 1 FROM AREA ORDER BY AREA_ID DESC
		SET @ID_GEN = 'AREA' + right('000000000000' + convert(varchar(20),@CURVALUE), 15 - len('AREA'))
	END
	ELSE IF(@NAME_TABLE = 'USER')
	BEGIN
		SELECT TOP 1 @CURVALUE = RIGHT([USER_ID],7) + 1 FROM [USER] ORDER BY [USER_ID] DESC
		SET @ID_GEN = 'USER' + right('000000000000' + convert(varchar(20),@CURVALUE), 15 - len('USER'))
	END
	ELSE IF(@NAME_TABLE = 'PRODUCT_TYPE')
	BEGIN
		SELECT TOP 1 @CURVALUE = RIGHT([PRODUCT_TYPE_ID],7) + 1 FROM [PRODUCT_TYPE] ORDER BY [PRODUCT_TYPE_ID] DESC
		SET @ID_GEN = 'PRO_TYPE' + right('000000000000' + convert(varchar(20),@CURVALUE), 15 - len('PRO_TYPE'))
	END
	ELSE IF(@NAME_TABLE = 'SUPPLIER')
	BEGIN
		SELECT TOP 1 @CURVALUE = RIGHT(SUPPLIER_ID,7) + 1 FROM SUPPLIER ORDER BY SUPPLIER_ID DESC
		SET @ID_GEN = 'SUP' + right('000000000000' + convert(varchar(20),@CURVALUE), 15 - len('SUP'))
	END
	ELSE IF(@NAME_TABLE = 'ROLE_USER')
	BEGIN
		SELECT TOP 1 @CURVALUE = RIGHT(ROLE_USER_ID,7) + 1 FROM ROLE_USER ORDER BY ROLE_USER_ID DESC
		SET @ID_GEN = 'ROL' + right('000000000000' + convert(varchar(20),@CURVALUE), 15 - len('ROL'))
	END

	RETURN ISNULL(@ID_GEN,1)
END
GO
/****** Object:  Table [dbo].[AREA]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[AREA](
	[AREA_ID] [varchar](20) NOT NULL,
	[AREA_CODE] [varchar](20) NULL,
	[AREA_NAME] [nvarchar](500) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [AREA_PK] PRIMARY KEY CLUSTERED 
(
	[AREA_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[BRANCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[BRANCH](
	[BRANCH_ID] [varchar](20) NOT NULL,
	[AREA_ID] [varchar](20) NOT NULL,
	[BRANCH_CODE] [varchar](20) NULL,
	[BRANCH_NAME] [nvarchar](500) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [BRANCH_PK] PRIMARY KEY CLUSTERED 
(
	[BRANCH_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DOC_IMP_PRODUCT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DOC_IMP_PRODUCT](
	[DOC_IMP_PRODUCT_ID] [varchar](20) NOT NULL,
	[DOC_IMP_PRODUCT_CODE] [varchar](20) NOT NULL,
	[BRANCH_ID] [varchar](20) NOT NULL,
	[DELIVER] [nvarchar](500) NULL,
	[RECEIVER] [varchar](20) NULL,
	[TOTAL] [decimal](18, 2) NULL,
	[STATUS] [varchar](10) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [DOC_IMP_PRODUCT_PK] PRIMARY KEY CLUSTERED 
(
	[DOC_IMP_PRODUCT_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DOC_IMP_PRODUCT_DT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DOC_IMP_PRODUCT_DT](
	[DOC_IMP_PRODUCT_DT_ID] [varchar](20) NOT NULL,
	[PRODUCT_ID] [varchar](20) NOT NULL,
	[PRICE] [decimal](18, 2) NOT NULL,
	[STATUS] [varchar](10) NULL,
	[DOC_IMP_PRODUCT_ID] [varchar](20) NULL,
 CONSTRAINT [DOC_IMP_PRODUCT_DT_PK] PRIMARY KEY CLUSTERED 
(
	[DOC_IMP_PRODUCT_DT_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[INVOICE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[INVOICE](
	[INVOICE_ID] [varchar](20) NOT NULL,
	[INVOICE_CODE] [varchar](20) NOT NULL,
	[USER_ID] [varchar](20) NOT NULL,
	[RECEIVER] [nvarchar](500) NULL,
	[RECEIVER_ADDRESS] [nvarchar](500) NULL,
	[RECEIVER_PHONE] [varchar](20) NOT NULL,
	[TOTAL] [decimal](18, 2) NULL,
	[STATUS] [varchar](10) NULL,
	[MONEY_PAYED] [decimal](18, 2) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [INVOICE_PK] PRIMARY KEY CLUSTERED 
(
	[INVOICE_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[INVOICE_DT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[INVOICE_DT](
	[INVOICE_DT_ID] [varchar](20) NOT NULL,
	[INVOICE_ID] [varchar](20) NOT NULL,
	[PRODUCT_ID] [varchar](20) NOT NULL,
	[QUANTITY] [int] NULL,
	[PRICE] [decimal](18, 2) NOT NULL,
 CONSTRAINT [INVOICE_DT_PK] PRIMARY KEY CLUSTERED 
(
	[INVOICE_DT_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[LOG]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[LOG](
	[LOG_ID] [varchar](20) NOT NULL,
	[REF_ID] [varchar](20) NOT NULL,
	[LOG_DATE] [datetime] NOT NULL,
	[LOG_STEP] [varchar](20) NOT NULL,
	[LOG_DESC] [nvarchar](max) NOT NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [LOG_PK] PRIMARY KEY CLUSTERED 
(
	[LOG_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PRODUCT_TYPE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PRODUCT_TYPE](
	[PRODUCT_TYPE_ID] [varchar](20) NOT NULL,
	[PRODUCT_TYPE_CODE] [varchar](20) NULL,
	[PRODUCT_TYPE_NAME] [nvarchar](500) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [PRODUCT_TYPE_PK] PRIMARY KEY CLUSTERED 
(
	[PRODUCT_TYPE_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PRODUCTS]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PRODUCTS](
	[PRODUCT_ID] [varchar](20) NOT NULL,
	[PRODUCT_TYPE_ID] [varchar](20) NOT NULL,
	[SUPPLIER_ID] [varchar](20) NOT NULL,
	[PRODUCT_CODE] [varchar](20) NULL,
	[PRODUCT_NAME] [nvarchar](500) NULL,
	[DESCRIPTION] [nvarchar](max) NULL,
	[PRICE] [decimal](18, 0) NULL,
	[NOTE] [nvarchar](max) NULL,
	[IMG_URL] [nvarchar](max) NULL,
	[CPU] [nvarchar](max) NULL,
	[RAM] [nvarchar](max) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [PRODUCTS_PK] PRIMARY KEY CLUSTERED 
(
	[PRODUCT_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ROLE_USER]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ROLE_USER](
	[ROLE_USER_ID] [varchar](20) NOT NULL,
	[ROLE_USER_CODE] [varchar](20) NOT NULL,
	[ROLE_USER_NAME] [nvarchar](500) NOT NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [ROLE_USER_PK] PRIMARY KEY CLUSTERED 
(
	[ROLE_USER_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[SPECIFICATIONS]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[SPECIFICATIONS](
	[SPECIFICATION_ID] [varchar](20) NOT NULL,
	[RAM] [nvarchar](max) NULL,
	[CPU] [nvarchar](max) NULL,
	[DISK] [nvarchar](max) NULL,
	[VGA] [nvarchar](max) NULL,
	[MONITOR] [nvarchar](max) NULL,
	[PORT] [nvarchar](max) NULL,
	[OS] [nvarchar](max) NULL,
	[WEIGHT] [nvarchar](max) NULL,
	[SIZE] [nvarchar](max) NULL,
	[COLOR] [nvarchar](max) NULL,
	[BATTERY] [nvarchar](max) NULL,
	[LED_KEYBOARD] [nvarchar](max) NULL,
	[BLUETOOTH] [nvarchar](max) NULL,
	[WEBCAM] [nvarchar](max) NULL,
	[PRODUCT_ID] [varchar](20) NULL,
 CONSTRAINT [PK_SPECIFICATIONS] PRIMARY KEY CLUSTERED 
(
	[SPECIFICATION_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[STOCK]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[STOCK](
	[STOCK_ID] [varchar](20) NULL,
	[QUANTITY] [decimal](18, 0) NULL,
	[PRODUCT_ID] [varchar](20) NULL,
	[WAREHOUSE_ID] [varchar](20) NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[SUPPLIER]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[SUPPLIER](
	[SUPPLIER_ID] [varchar](20) NOT NULL,
	[SUPPLIER_CODE] [varchar](20) NULL,
	[SUPPLIER_NAME] [nvarchar](500) NULL,
	[SUPPLIER_PHONE] [varchar](20) NULL,
	[SUPPLIER_ADDRESS] [nvarchar](500) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [SUPPLIER_PK] PRIMARY KEY CLUSTERED 
(
	[SUPPLIER_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[USER]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[USER](
	[USER_ID] [varchar](20) NOT NULL,
	[BRANCH_ID] [varchar](20) NOT NULL,
	[ROLE_USER_ID] [varchar](20) NOT NULL,
	[USER_CODE] [varchar](20) NOT NULL,
	[USER_NAME] [nvarchar](500) NOT NULL,
	[USER_FULLNAME] [nvarchar](500) NULL,
	[EMAIL] [varchar](100) NULL,
	[PHONE] [varchar](20) NULL,
	[ADDRESS] [nvarchar](500) NULL,
	[STATUS] [varchar](10) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
	[PASSWORD] [nvarchar](500) NULL,
 CONSTRAINT [USER_PK] PRIMARY KEY CLUSTERED 
(
	[USER_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[WAREHOUSE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[WAREHOUSE](
	[WAREHOUSE_ID] [varchar](20) NOT NULL,
	[BRANCH_ID] [varchar](20) NOT NULL,
	[AREA_ID] [varchar](20) NOT NULL,
	[WAREHOUSE_CODE] [varchar](20) NULL,
	[WAREHOUSE_NAME] [nvarchar](500) NULL,
	[WAREHOUSE_ADDRESS] [nvarchar](500) NULL,
	[CREATE_ID] [varchar](20) NOT NULL,
	[CREATE_DATE] [datetime] NULL,
 CONSTRAINT [WAREHOUSE_PK] PRIMARY KEY CLUSTERED 
(
	[WAREHOUSE_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT]  WITH CHECK ADD  CONSTRAINT [fk_doc_imp_product_branch_id_branch] FOREIGN KEY([BRANCH_ID])
REFERENCES [dbo].[BRANCH] ([BRANCH_ID])
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT] CHECK CONSTRAINT [fk_doc_imp_product_branch_id_branch]
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT]  WITH CHECK ADD  CONSTRAINT [fk_doc_imp_product_create_id_user] FOREIGN KEY([CREATE_ID])
REFERENCES [dbo].[USER] ([USER_ID])
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT] CHECK CONSTRAINT [fk_doc_imp_product_create_id_user]
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT]  WITH CHECK ADD  CONSTRAINT [fk_doc_imp_product_receiver_user] FOREIGN KEY([RECEIVER])
REFERENCES [dbo].[USER] ([USER_ID])
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT] CHECK CONSTRAINT [fk_doc_imp_product_receiver_user]
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT_DT]  WITH CHECK ADD  CONSTRAINT [fk_doc_imp_product_dt_doc_imp_product_id_doc_imp_product] FOREIGN KEY([DOC_IMP_PRODUCT_ID])
REFERENCES [dbo].[DOC_IMP_PRODUCT] ([DOC_IMP_PRODUCT_ID])
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT_DT] CHECK CONSTRAINT [fk_doc_imp_product_dt_doc_imp_product_id_doc_imp_product]
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT_DT]  WITH CHECK ADD  CONSTRAINT [fk_doc_imp_product_dt_product_id_products] FOREIGN KEY([PRODUCT_ID])
REFERENCES [dbo].[PRODUCTS] ([PRODUCT_ID])
GO
ALTER TABLE [dbo].[DOC_IMP_PRODUCT_DT] CHECK CONSTRAINT [fk_doc_imp_product_dt_product_id_products]
GO
ALTER TABLE [dbo].[INVOICE]  WITH CHECK ADD  CONSTRAINT [fk_invoice_create_id_user] FOREIGN KEY([CREATE_ID])
REFERENCES [dbo].[USER] ([USER_ID])
GO
ALTER TABLE [dbo].[INVOICE] CHECK CONSTRAINT [fk_invoice_create_id_user]
GO
ALTER TABLE [dbo].[INVOICE]  WITH CHECK ADD  CONSTRAINT [fk_invoice_user_id_user] FOREIGN KEY([USER_ID])
REFERENCES [dbo].[USER] ([USER_ID])
GO
ALTER TABLE [dbo].[INVOICE] CHECK CONSTRAINT [fk_invoice_user_id_user]
GO
ALTER TABLE [dbo].[PRODUCTS]  WITH CHECK ADD  CONSTRAINT [fk_products_create_id_user] FOREIGN KEY([CREATE_ID])
REFERENCES [dbo].[USER] ([USER_ID])
GO
ALTER TABLE [dbo].[PRODUCTS] CHECK CONSTRAINT [fk_products_create_id_user]
GO
ALTER TABLE [dbo].[PRODUCTS]  WITH CHECK ADD  CONSTRAINT [fk_products_product_type_id_product_type] FOREIGN KEY([PRODUCT_TYPE_ID])
REFERENCES [dbo].[PRODUCT_TYPE] ([PRODUCT_TYPE_ID])
GO
ALTER TABLE [dbo].[PRODUCTS] CHECK CONSTRAINT [fk_products_product_type_id_product_type]
GO
ALTER TABLE [dbo].[PRODUCTS]  WITH CHECK ADD  CONSTRAINT [fk_products_supplier_id_supplier] FOREIGN KEY([SUPPLIER_ID])
REFERENCES [dbo].[SUPPLIER] ([SUPPLIER_ID])
GO
ALTER TABLE [dbo].[PRODUCTS] CHECK CONSTRAINT [fk_products_supplier_id_supplier]
GO
ALTER TABLE [dbo].[WAREHOUSE]  WITH CHECK ADD  CONSTRAINT [fk_warehouse_area_id_area] FOREIGN KEY([AREA_ID])
REFERENCES [dbo].[AREA] ([AREA_ID])
GO
ALTER TABLE [dbo].[WAREHOUSE] CHECK CONSTRAINT [fk_warehouse_area_id_area]
GO
ALTER TABLE [dbo].[WAREHOUSE]  WITH CHECK ADD  CONSTRAINT [fk_warehouse_branch_id_branch] FOREIGN KEY([BRANCH_ID])
REFERENCES [dbo].[BRANCH] ([BRANCH_ID])
GO
ALTER TABLE [dbo].[WAREHOUSE] CHECK CONSTRAINT [fk_warehouse_branch_id_branch]
GO
ALTER TABLE [dbo].[WAREHOUSE]  WITH CHECK ADD  CONSTRAINT [fk_warehouse_create_id_user] FOREIGN KEY([CREATE_ID])
REFERENCES [dbo].[USER] ([USER_ID])
GO
ALTER TABLE [dbo].[WAREHOUSE] CHECK CONSTRAINT [fk_warehouse_create_id_user]
GO
/****** Object:  StoredProcedure [dbo].[AREA_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROC [dbo].[AREA_BYID]
@AREA_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT * FROM AREA WHERE AREA_ID = @AREA_ID
END
GO
/****** Object:  StoredProcedure [dbo].[AREA_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE proc [dbo].[AREA_DELETE]
@AREA_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM AREA WHERE AREA_ID = @AREA_ID
	SELECT @AREA_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[AREA_INSERT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[AREA_INSERT]
@AREA_ID     VARCHAR(20) = NULL,
@AREA_CODE   VARCHAR(20) = NULL,
@AREA_NAME   NVARCHAR(500) = NULL,
@CREATE_ID   VARCHAR(100) = NULL,
@CREATE_DATE VARCHAR(50) = NULL
AS
BEGIN
	SET @AREA_ID = (SELECT [dbo].[GEN_ID] ('AREA'))

	INSERT INTO AREA(AREA_ID,AREA_CODE,AREA_NAME,CREATE_ID,CREATE_DATE) VALUES(@AREA_ID,@AREA_CODE,@AREA_NAME,@CREATE_ID,GETDATE())

	SELECT @AREA_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[AREA_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROC [dbo].[AREA_SEARCH]
@AREA_ID     VARCHAR(20) = NULL,
@AREA_CODE   VARCHAR(20) = NULL,
@AREA_NAME   NVARCHAR(500) = NULL,
@CREATE_ID   VARCHAR(100) = NULL,
@CREATE_DATE VARCHAR(50) = NULL
AS
BEGIN
	SELECT * FROM AREA
END
GO
/****** Object:  StoredProcedure [dbo].[AREA_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
--
CREATE PROCEDURE [dbo].[AREA_UPDATE]
@AREA_ID     VARCHAR(20) = NULL,
@AREA_CODE   VARCHAR(20) = NULL,
@AREA_NAME   VARCHAR(20) = NULL,
@CREATE_ID   VARCHAR(20) = NULL,
@CREATE_DATE VARCHAR(50) = NULL                       
AS
BEGIN
	UPDATE [AREA] SET 
	AREA_CODE = @AREA_CODE,
	AREA_NAME = @AREA_NAME,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = GETDATE()
	WHERE [AREA_ID] = @AREA_ID
	SELECT @AREA_ID ID,'1'RESULT,'' ERRORDESC
END
--
GO
/****** Object:  StoredProcedure [dbo].[BRANCH_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROC [dbo].[BRANCH_BYID]
@BRANCH_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT * FROM BRANCH WHERE BRANCH_ID = @BRANCH_ID
END
GO
/****** Object:  StoredProcedure [dbo].[BRANCH_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[BRANCH_DELETE]
@BRANCH_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM BRANCH WHERE BRANCH_ID = @BRANCH_ID
	SELECT @BRANCH_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[BRANCH_INSERT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[BRANCH_INSERT]
@BRANCH_ID   VARCHAR(20) = NULL,
@AREA_ID     VARCHAR(20) = NULL,
@BRANCH_CODE VARCHAR(20) = NULL,
@BRANCH_NAME NVARCHAR(500) = NULL,
@CREATE_ID   VARCHAR(200) = NULL,
@CREATE_DATE VARCHAR(50) = NULL
AS 
BEGIN
	DECLARE @CURVALUE INT = 0
	SELECT TOP 1 @CURVALUE = RIGHT(BRANCH_ID,7) + 1 FROM BRANCH ORDER BY BRANCH_ID DESC
	SET @BRANCH_ID = 'BRAN' + right('000000000000' + convert(varchar(20),@CURVALUE), 15 - len('BRANCH'))
	INSERT INTO BRANCH(BRANCH_ID,AREA_ID,BRANCH_CODE,BRANCH_NAME,CREATE_ID,CREATE_DATE) VALUES(@BRANCH_ID,@AREA_ID,@BRANCH_CODE,@BRANCH_NAME,@CREATE_ID,GETDATE())

	SELECT @BRANCH_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[BRANCH_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[BRANCH_SEARCH]
@BRANCH_ID   VARCHAR(20) = NULL,
@AREA_ID     VARCHAR(20) = NULL,
@BRANCH_CODE VARCHAR(20) = NULL,
@BRANCH_NAME NVARCHAR(500) = NULL,
@CREATE_ID   VARCHAR(200) = NULL,
@CREATE_DATE VARCHAR(50) = NULL
AS
BEGIN
	SELECT * 
	FROM BRANCH A
	WHERE (A.BRANCH_ID = @BRANCH_ID OR @BRANCH_ID IS NULL OR @BRANCH_ID = '')
	AND (A.AREA_ID = @AREA_ID OR @AREA_ID IS NULL OR @AREA_ID = '')
	AND (A.BRANCH_CODE = @BRANCH_CODE OR @BRANCH_CODE IS NULL OR @BRANCH_CODE = '')
	AND (A.BRANCH_NAME LIKE '%' + @BRANCH_NAME + '%' OR @BRANCH_NAME IS NULL OR @BRANCH_NAME = '')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[BRANCH_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[BRANCH_UPDATE]
@BRANCH_ID   VARCHAR(20) = NULL,
@AREA_ID     VARCHAR(20) = NULL,
@BRANCH_CODE VARCHAR(20) = NULL,
@BRANCH_NAME NVARCHAR(500) = NULL,
@CREATE_ID   VARCHAR(20) = NULL,
@CREATE_DATE VARCHAR(500) = NULL                      
AS
BEGIN
	UPDATE [BRANCH] SET 
	AREA_ID = @AREA_ID,
	BRANCH_CODE = @BRANCH_CODE,
	BRANCH_NAME = @BRANCH_NAME,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [BRANCH_ID] = @BRANCH_ID

	SELECT @BRANCH_ID ID,'1'RESULT,'' ERRORDESC
END
--
GO
/****** Object:  StoredProcedure [dbo].[DOC_IMP_PRODUCT_DT_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[DOC_IMP_PRODUCT_DT_UPDATE]
@DOC_IMP_PRODUCT_DT_ID VARCHAR(20) = NULL,
@PRODUCT_ID            VARCHAR(20) = NULL,
@PRICE                 DECIMAL(18, 2) = NULL,
@STATUS                VARCHAR(20) = NULL,
@DOC_IMP_PRODUCT_ID    VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [DOC_IMP_PRODUCT_DT] SET 
	PRODUCT_ID = @PRODUCT_ID,
	PRICE = @PRICE,
	[STATUS] = @STATUS,
	DOC_IMP_PRODUCT_ID = @DOC_IMP_PRODUCT_ID
	
	WHERE [DOC_IMP_PRODUCT_DT_ID] = @DOC_IMP_PRODUCT_DT_ID
	INSERT INTO [dbo].[DOC_IMP_PRODUCT_DT] (DOC_IMP_PRODUCT_DT_ID, PRODUCT_ID,PRICE,STATUS,DOC_IMP_PRODUCT_ID) 
	VALUES(@DOC_IMP_PRODUCT_DT_ID, @PRODUCT_ID,@PRICE,@STATUS,@DOC_IMP_PRODUCT_ID)
END
--
GO
/****** Object:  StoredProcedure [dbo].[DOC_IMP_PRODUCT_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[DOC_IMP_PRODUCT_UPDATE]
@DOC_IMP_PRODUCT_ID       VARCHAR(20) = NULL,
@DOC_IMP_PRODUCT_CODE     VARCHAR(20) = NULL,
@BRANCH_ID                VARCHAR(20) = NULL,
@DELIVER                  VARCHAR(500) = NULL,
@RECEIVER                 VARCHAR(100) = NULL,
@TOTAL                    VARCHAR(20) = NULL,
@STATUS                   VARCHAR(10) = NULL,
@CREATE_ID                VARCHAR(20) = NULL,
@CREATE_DATE              VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [DOC_IMP_PRODUCT] SET 
	DOC_IMP_PRODUCT_CODE = @DOC_IMP_PRODUCT_ID,
	BRANCH_ID = @BRANCH_ID,
	DELIVER = @DELIVER,
	RECEIVER = @RECEIVER,
	TOTAL = @TOTAL,
	[STATUS] = @STATUS,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [DOC_IMP_PRODUCT_ID] = @DOC_IMP_PRODUCT_ID
	INSERT INTO [dbo].[DOC_IMP_PRODUCT] (DOC_IMP_PRODUCT_ID, DOC_IMP_PRODUCT_CODE,BRANCH_ID,DELIVER,RECEIVER,TOTAL,STATUS,CREATE_ID,CREATE_DATE)
	VALUES(@DOC_IMP_PRODUCT_ID, @DOC_IMP_PRODUCT_CODE,@BRANCH_ID,@DELIVER,@RECEIVER,@TOTAL,@STATUS,@CREATE_ID,@CREATE_DATE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[INVOICE_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROC [dbo].[INVOICE_BYID]
@INVOICE_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT * FROM INVOICE WHERE INVOICE_ID = @INVOICE_ID
END
GO
/****** Object:  StoredProcedure [dbo].[INVOICE_DT_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[INVOICE_DT_SEARCH]
@INVOICE_DT_ID VARCHAR(20),
@INVOICE_ID    VARCHAR(20),
@PRODUCT_ID    VARCHAR(20),
@QUANTITY      VARCHAR(20),
@PRICE         VARCHAR(20)
AS
BEGIN
	SELECT * 
	FROM INVOICE_DT A
	WHERE (A.INVOICE_DT_ID = @INVOICE_DT_ID OR @INVOICE_DT_ID IS NULL OR @INVOICE_DT_ID = '')
	AND (A.INVOICE_ID = @INVOICE_ID OR @INVOICE_ID IS NULL OR @INVOICE_ID = '')
	AND (A.PRODUCT_ID = @PRODUCT_ID OR @PRODUCT_ID IS NULL OR @PRODUCT_ID = '')
	AND (A.QUANTITY = CONVERT(DECIMAL(18,0),@QUANTITY) OR @QUANTITY IS NULL OR @QUANTITY = '' OR @QUANTITY = '0')
	AND (A.PRICE = CONVERT(DECIMAL(18,0),@PRICE) OR @PRICE IS NULL OR @PRICE = '' OR @PRICE = '0')
END
GO
/****** Object:  StoredProcedure [dbo].[INVOICE_DT_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[INVOICE_DT_UPDATE]
@INVOICE_DT_ID    VARCHAR(20) = NULL,
@INVOICE_ID       VARCHAR(20) = NULL,
@PRODUCT_ID VARCHAR(20) = NULL,
@QUANTITY         VARCHAR(20) = NULL,
@PRICE            DECIMAL(18, 2) = NULL
AS
BEGIN
	UPDATE [INVOICE_DT] SET 
	INVOICE_ID = @INVOICE_ID,
	PRODUCT_ID = @PRODUCT_ID,
	QUANTITY = @QUANTITY,
	PRICE = @PRICE
	WHERE [INVOICE_DT_ID] = @INVOICE_DT_ID
	INSERT INTO [dbo].[INVOICE_DT] (INVOICE_DT_ID, INVOICE_ID,PRODUCT_ID,QUANTITY,PRICE) 
	VALUES(@INVOICE_DT_ID, @INVOICE_ID,@PRODUCT_ID,@QUANTITY,@PRICE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[INVOICE_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[INVOICE_SEARCH]
@INVOICE_ID       VARCHAR(20) = NULL,
@INVOICE_CODE     VARCHAR(20) = NULL,
@USER_ID		  VARCHAR(20) = NULL,
@RECEIVER         NVARCHAR(500) = NULL,
@RECEIVER_ADDRESS NVARCHAR(MAX) = NULL,
@RECEIVER_PHONE   VARCHAR(20) = NULL,
@TOTAL            VARCHAR(50) = NULL,
@STATUS           VARCHAR(10) = NULL,
@MONEY_PAYED      VARCHAR(50) = NULL,
@CREATE_ID        VARCHAR(200) = NULL,
@CREATE_DATE      VARCHAR(50) = NULL
AS
BEGIN
	SELECT * 
	FROM INVOICE A
	WHERE (A.INVOICE_ID = @INVOICE_ID OR @INVOICE_ID IS NULL OR @INVOICE_ID = '')
	AND (A.INVOICE_CODE = @INVOICE_CODE OR @INVOICE_CODE IS NULL OR @INVOICE_CODE = '')
	AND (A.[USER_ID] = @USER_ID OR @USER_ID IS NULL OR @USER_ID = '')
	AND (A.RECEIVER = @RECEIVER OR @RECEIVER IS NULL OR @RECEIVER = '')
	AND (A.RECEIVER_ADDRESS = @RECEIVER_ADDRESS OR @RECEIVER_ADDRESS IS NULL OR @RECEIVER_ADDRESS = '')
	AND (A.RECEIVER_PHONE = @RECEIVER_PHONE OR @RECEIVER_PHONE IS NULL OR @RECEIVER_PHONE = '')
	AND (A.TOTAL = CONVERT(DECIMAL(18,0),@TOTAL) OR @TOTAL IS NULL OR @TOTAL = '' OR @TOTAL = '0')
	AND (A.[STATUS] = @STATUS OR @STATUS IS NULL OR @STATUS = '')
	AND (A.MONEY_PAYED = CONVERT(DECIMAL(18,0),@MONEY_PAYED) OR @MONEY_PAYED IS NULL OR @MONEY_PAYED = '' OR @MONEY_PAYED = '0')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[INVOICE_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[INVOICE_UPDATE]
@INVOICE_ID       VARCHAR(20) = NULL,
@INVOICE_CODE     VARCHAR(20) = NULL,
@USER_ID      VARCHAR(20) = NULL,
@RECEIVER         VARCHAR(500) = NULL,
@RECEIVER_ADDRESS VARCHAR(500) = NULL,
@RECEIVER_PHONE   VARCHAR(20) = NULL,
@TOTAL            VARCHAR(20) = NULL,
@STATUS           VARCHAR(20) = NULL,
@MONEY_PAYED      DECIMAL(18, 2) = NULL,
@CREATE_ID        VARCHAR(20) = NULL,
@CREATE_DATE      VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [INVOICE] SET 
	INVOICE_CODE = @INVOICE_CODE,
	[USER_ID] = @USER_ID,
	RECEIVER = @RECEIVER,
	RECEIVER_ADDRESS = @RECEIVER_ADDRESS,
	RECEIVER_PHONE = @RECEIVER_PHONE,
	TOTAL = @TOTAL,
	[STATUS] = @STATUS,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [INVOICE_ID] = @INVOICE_ID
	INSERT INTO [dbo].[INVOICE] (INVOICE_ID,INVOICE_CODE,[USER_ID],RECEIVER,RECEIVER_ADDRESS,RECEIVER_PHONE,TOTAL,STATUS,MONEY_PAYED,CREATE_ID,CREATE_DATE) 
	VALUES(@INVOICE_ID, @INVOICE_CODE,@USER_ID,@RECEIVER,@RECEIVER_ADDRESS,@RECEIVER_PHONE,@TOTAL,@STATUS,@MONEY_PAYED,@CREATE_ID,@CREATE_DATE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[LOG_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[LOG_BYID]
@LOG_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT * FROM LOG WHERE LOG_ID = @LOG_ID
END
GO
/****** Object:  StoredProcedure [dbo].[LOG_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[LOG_DELETE]
@LOG_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM LOG WHERE LOG_ID = @LOG_ID
	SELECT @LOG_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[LOG_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


CREATE PROCEDURE [dbo].[LOG_SEARCH]
@LOG_ID      VARCHAR(20) = NULL,
@REF_ID      VARCHAR(20) = NULL,
@LOG_DATE    VARCHAR(50) = NULL,
@LOG_STEP    NVARCHAR(500) = NULL,
@LOG_DESC    NVARCHAR(MAX) = NULL,
@CREATE_ID   VARCHAR(20) = NULL,
@CREATE_DATE VARCHAR(50) = NULL
AS
BEGIN
	SELECT * 
	FROM [LOG] A
	WHERE (A.LOG_ID = @LOG_ID OR @LOG_ID IS NULL OR @LOG_ID = '')
	AND (A.REF_ID = @REF_ID OR @REF_ID IS NULL OR @REF_ID = '')
	AND (CONVERT(DATE,A.LOG_DATE,103) = CONVERT(DATE,@LOG_DATE,103) OR @LOG_DATE IS NULL OR @LOG_DATE = '')
	AND (A.LOG_STEP = @LOG_STEP OR @LOG_STEP IS NULL OR @LOG_STEP = '')
	AND (A.LOG_DESC = @LOG_DESC OR @LOG_DESC IS NULL OR @LOG_DESC = '')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[LOG_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[LOG_UPDATE]
@LOG_ID      VARCHAR(20) = NULL,
@REF_ID      VARCHAR(20) = NULL,
@LOG_DATE    VARCHAR(20) = NULL,
@LOG_STEP    VARCHAR(20) = NULL,
@LOG_DESC    VARCHAR(20) = NULL,
@CREATE_ID   VARCHAR(20) = NULL,
@CREATE_DATE VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [LOG] SET 
	REF_ID = @REF_ID,
	LOG_DATE = @LOG_DATE,
	LOG_STEP = @LOG_STEP,
	LOG_DESC = @LOG_DESC,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [LOG_ID] = @LOG_ID
	SELECT @LOG_ID ID,'1'RESULT,'' ERRORDESC
	--INSERT INTO [dbo].[LOG] (LOG_ID, REF_ID,LOG_DATE,LOG_STEP,LOG_DESC,CREATE_ID,CREATE_DATE)
	--VALUES(@LOG_ID, @REF_ID,@LOG_DATE,@LOG_STEP,@LOG_DESC,@CREATE_ID,@CREATE_DATE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[PRODUCT_TYPE_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[PRODUCT_TYPE_BYID]
@PRODUCT_TYPE_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT * FROM PRODUCT_TYPE WHERE PRODUCT_TYPE_ID = @PRODUCT_TYPE_ID
END
GO
/****** Object:  StoredProcedure [dbo].[PRODUCT_TYPE_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[PRODUCT_TYPE_DELETE]
@PRODUCT_TYPE_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM PRODUCT_TYPE WHERE PRODUCT_TYPE_ID = @PRODUCT_TYPE_ID
	SELECT @PRODUCT_TYPE_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[PRODUCT_TYPE_INSERT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[PRODUCT_TYPE_INSERT]
@PRODUCT_TYPE_ID   VARCHAR(20) = NULL,
@PRODUCT_TYPE_CODE VARCHAR(20) = NULL,
@PRODUCT_TYPE_NAME NVARCHAR(500) = NULL,
@CREATE_ID         VARCHAR(20) = NULL,
@CREATE_DATE       VARCHAR(20) = NULL
AS
BEGIN
	SET @PRODUCT_TYPE_ID = (SELECT [dbo].[GEN_ID] ('PRODUCT_TYPE'))
	INSERT INTO [dbo].[PRODUCT_TYPE] (PRODUCT_TYPE_ID, PRODUCT_TYPE_CODE,PRODUCT_TYPE_NAME,CREATE_ID,CREATE_DATE)
	VALUES(@PRODUCT_TYPE_ID, @PRODUCT_TYPE_CODE,@PRODUCT_TYPE_NAME,@CREATE_ID,GETDATE())

	SELECT @PRODUCT_TYPE_ID ID,'1'RESULT,'' ERRORDESC
END
--

GO
/****** Object:  StoredProcedure [dbo].[PRODUCT_TYPE_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[PRODUCT_TYPE_SEARCH]
@PRODUCT_TYPE_ID   VARCHAR(20) = NULL,
@PRODUCT_TYPE_CODE VARCHAR(20) = NULL,
@PRODUCT_TYPE_NAME NVARCHAR(500) = NULL,
@CREATE_ID         VARCHAR(100) = NULL,
@CREATE_DATE       VARCHAR(50) = NULL
AS
BEGIN
	SELECT * 
	FROM PRODUCT_TYPE A
	WHERE (A.PRODUCT_TYPE_ID = @PRODUCT_TYPE_ID OR @PRODUCT_TYPE_ID IS NULL OR @PRODUCT_TYPE_ID = '')
	AND (A.PRODUCT_TYPE_CODE = @PRODUCT_TYPE_CODE OR @PRODUCT_TYPE_CODE IS NULL OR @PRODUCT_TYPE_CODE = '')
	AND (A.PRODUCT_TYPE_NAME = @PRODUCT_TYPE_NAME OR @PRODUCT_TYPE_NAME IS NULL OR @PRODUCT_TYPE_NAME = '')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[PRODUCT_TYPE_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[PRODUCT_TYPE_UPDATE]
@PRODUCT_TYPE_ID   VARCHAR(20) = NULL,
@PRODUCT_TYPE_CODE VARCHAR(20) = NULL,
@PRODUCT_TYPE_NAME VARCHAR(500) = NULL,
@CREATE_ID         VARCHAR(20) = NULL,
@CREATE_DATE       VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [PRODUCT_TYPE] SET 
	PRODUCT_TYPE_CODE = @PRODUCT_TYPE_CODE,
	PRODUCT_TYPE_NAME = @PRODUCT_TYPE_NAME,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [PRODUCT_TYPE_ID] = @PRODUCT_TYPE_ID
	SELECT @PRODUCT_TYPE_ID ID,'1'RESULT,'' ERRORDESC
	--INSERT INTO [dbo].[PRODUCT_TYPE] (PRODUCT_TYPE_ID, PRODUCT_TYPE_CODE,PRODUCT_TYPE_NAME,CREATE_ID,CREATE_DATE)
	--VALUES(@PRODUCT_TYPE_ID, @PRODUCT_TYPE_CODE,@PRODUCT_TYPE_NAME,@CREATE_ID,@CREATE_DATE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[PRODUCT_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[PRODUCT_UPDATE]
@PRODUCT_ID      VARCHAR(20) = NULL,
@PRODUCT_TYPE_ID VARCHAR(20) = NULL,
@SUPPLIER_ID     VARCHAR(20) = NULL,
@PRODUCT_CODE    VARCHAR(20) = NULL,
@PRODUCT_NAME    VARCHAR(500) = NULL,
@DESCRIPTION     VARCHAR(20) = NULL,
@NOTE            VARCHAR(20) = NULL,
@CREATE_ID       VARCHAR(20) = NULL,
@CREATE_DATE     VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [PRODUCTS] SET 
	PRODUCT_TYPE_ID = @PRODUCT_TYPE_ID,
	SUPPLIER_ID = @SUPPLIER_ID,
	PRODUCT_CODE = @PRODUCT_CODE,
	PRODUCT_NAME = @PRODUCT_NAME,
	CREATE_ID = @CREATE_ID,
	DESCRIPTION = @DESCRIPTION,
	NOTE  = @NOTE,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [PRODUCT_ID] = @PRODUCT_ID
	INSERT INTO [dbo].[PRODUCTS] (PRODUCT_ID, PRODUCT_TYPE_ID,SUPPLIER_ID,PRODUCT_CODE,PRODUCT_NAME,DESCRIPTION,NOTE,CREATE_ID,CREATE_DATE)
	VALUES(@PRODUCT_ID, @PRODUCT_TYPE_ID,@SUPPLIER_ID,@PRODUCT_CODE,@PRODUCT_NAME,@DESCRIPTION,@NOTE,@CREATE_ID,@CREATE_DATE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[ROLE_USER_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

create proc [dbo].[ROLE_USER_DELETE]
@ROLE_USER_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM ROLE_USER WHERE ROLE_USER_ID = @ROLE_USER_ID
	SELECT @ROLE_USER_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[ROLE_USER_INSERT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[ROLE_USER_INSERT]
@ROLE_USER_ID   VARCHAR(20) = NULL,
@ROLE_USER_CODE VARCHAR(20) = NULL,
@ROLE_USER_NAME VARCHAR(500) = NULL,
@CREATE_ID      VARCHAR(20) = NULL,
@CREATE_DATE    VARCHAR(20) = NULL
AS
BEGIN
	SET @ROLE_USER_ID = (SELECT [dbo].[GEN_ID] ('ROLE_USER'))
	INSERT INTO [dbo].[ROLE_USER] (ROLE_USER_ID, ROLE_USER_CODE,ROLE_USER_NAME,CREATE_ID,CREATE_DATE) 
	VALUES(@ROLE_USER_ID, @ROLE_USER_CODE,@ROLE_USER_NAME,@CREATE_ID,GETDATE())
	SELECT @ROLE_USER_ID ID,'1'RESULT,'' ERRORDESC
END
--
GO
/****** Object:  StoredProcedure [dbo].[ROLE_USER_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[ROLE_USER_SEARCH]
@ROLE_USER_ID   VARCHAR(20) = NULL,
@ROLE_USER_CODE VARCHAR(20) = NULL,
@ROLE_USER_NAME NVARCHAR(200) = NULL,
@CREATE_ID     VARCHAR(200) = NULL,
@CREATE_DATE   DATETIME = NULL
AS
BEGIN
	SELECT * 
	FROM [ROLE_USER] A
	WHERE (A.ROLE_USER_ID = @ROLE_USER_ID OR @ROLE_USER_ID IS NULL OR @ROLE_USER_ID = '')
	AND (A.ROLE_USER_CODE = @ROLE_USER_CODE OR @ROLE_USER_CODE IS NULL OR @ROLE_USER_CODE = '')
	AND (A.ROLE_USER_NAME = @ROLE_USER_NAME OR @ROLE_USER_NAME IS NULL OR @ROLE_USER_NAME = '')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[ROLE_USER_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ROLE_USER_UPDATE]
@ROLE_USER_ID   VARCHAR(20) = NULL,
@ROLE_USER_CODE VARCHAR(20) = NULL,
@ROLE_USER_NAME VARCHAR(500) = NULL,
@CREATE_ID      VARCHAR(20) = NULL,
@CREATE_DATE    VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [ROLE_USER] SET 
	ROLE_USER_CODE = @ROLE_USER_CODE,
	ROLE_USER_NAME = @ROLE_USER_NAME,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [ROLE_USER_ID] = @ROLE_USER_ID
	INSERT INTO [dbo].[ROLE_USER] (ROLE_USER_ID, ROLE_USER_CODE,ROLE_USER_NAME,CREATE_ID,CREATE_DATE) 
	VALUES(@ROLE_USER_ID, @ROLE_USER_CODE,@ROLE_USER_NAME,@CREATE_ID,@CREATE_DATE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[SUPPLIER_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SUPPLIER_BYID]
@SUPPLIER_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT * FROM SUPPLIER WHERE SUPPLIER_ID = @SUPPLIER_ID
END
GO
/****** Object:  StoredProcedure [dbo].[SUPPLIER_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[SUPPLIER_DELETE]
@SUPPLIER_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM SUPPLIER WHERE SUPPLIER_ID = @SUPPLIER_ID
	SELECT @SUPPLIER_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[SUPPLIER_INSERT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[SUPPLIER_INSERT]
@SUPPLIER_ID      VARCHAR(20) = NULL,
@SUPPLIER_CODE    VARCHAR(20) = NULL,
@SUPPLIER_NAME    VARCHAR(500) = NULL,
@SUPPLIER_PHONE   VARCHAR(20) = NULL,
@SUPPLIER_ADDRESS VARCHAR(500) = NULL,
@CREATE_ID        VARCHAR(20) = NULL,
@CREATE_DATE      VARCHAR(20) = NULL
AS
BEGIN
	SET @SUPPLIER_ID = (SELECT [dbo].[GEN_ID] ('SUPPLIER'))
	INSERT INTO [dbo].[SUPPLIER] (SUPPLIER_ID, SUPPLIER_CODE,SUPPLIER_NAME,SUPPLIER_PHONE,SUPPLIER_ADDRESS,CREATE_ID,CREATE_DATE)
	VALUES(@SUPPLIER_ID, @SUPPLIER_CODE,@SUPPLIER_NAME,@SUPPLIER_PHONE,@SUPPLIER_ADDRESS,@CREATE_ID,GETDATE())

	SELECT @SUPPLIER_ID ID,'1'RESULT,'' ERRORDESC
END
--
GO
/****** Object:  StoredProcedure [dbo].[SUPPLIER_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[SUPPLIER_SEARCH]
@SUPPLIER_ID      VARCHAR(20) = NULL,
@SUPPLIER_CODE    VARCHAR(20) = NULL,
@SUPPLIER_NAME    NVARCHAR(500) = NULL,
@SUPPLIER_PHONE   VARCHAR(20) = NULL,
@SUPPLIER_ADDRESS NVARCHAR(500) = NULL,
@CREATE_ID        VARCHAR(20) = NULL,
@CREATE_DATE      VARCHAR(20) = NULL
AS
BEGIN
	SELECT * 
	FROM SUPPLIER A
	WHERE (A.SUPPLIER_ID = @SUPPLIER_ID OR @SUPPLIER_ID IS NULL OR @SUPPLIER_ID = '')
	AND (A.SUPPLIER_CODE = @SUPPLIER_CODE OR @SUPPLIER_CODE IS NULL OR @SUPPLIER_CODE = '')
	AND (A.SUPPLIER_NAME = @SUPPLIER_NAME OR @SUPPLIER_NAME IS NULL OR @SUPPLIER_NAME = '')
	AND (A.SUPPLIER_PHONE = @SUPPLIER_PHONE OR @SUPPLIER_PHONE IS NULL OR @SUPPLIER_PHONE = '')
	AND (A.SUPPLIER_ADDRESS = @SUPPLIER_ADDRESS OR @SUPPLIER_ADDRESS IS NULL OR @SUPPLIER_ADDRESS = '')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[SUPPLIER_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[SUPPLIER_UPDATE]
@SUPPLIER_ID      VARCHAR(20) = NULL,
@SUPPLIER_CODE    VARCHAR(20) = NULL,
@SUPPLIER_NAME    VARCHAR(500) = NULL,
@SUPPLIER_PHONE   VARCHAR(20) = NULL,
@SUPPLIER_ADDRESS VARCHAR(500) = NULL,
@CREATE_ID        VARCHAR(20) = NULL,
@CREATE_DATE      VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [SUPPLIER] SET 
	SUPPLIER_CODE = @SUPPLIER_CODE,
	SUPPLIER_NAME = @SUPPLIER_NAME,
	SUPPLIER_PHONE = @SUPPLIER_PHONE,
	SUPPLIER_ADDRESS = @SUPPLIER_ADDRESS,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)
	WHERE [SUPPLIER_ID] = @SUPPLIER_ID
	SELECT @SUPPLIER_ID ID,'1'RESULT,'' ERRORDESC
	--INSERT INTO [dbo].[SUPPLIER] (SUPPLIER_ID, SUPPLIER_CODE,SUPPLIER_NAME,SUPPLIER_PHONE,SUPPLIER_ADDRESS,CREATE_ID,CREATE_DATE)
	--VALUES(@SUPPLIER_ID, @SUPPLIER_CODE,@SUPPLIER_NAME,@SUPPLIER_PHONE,@SUPPLIER_ADDRESS,@CREATE_ID,@CREATE_DATE)
END
--
GO
/****** Object:  StoredProcedure [dbo].[USER_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[USER_BYID]
@USER_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT *,'' AS ROLE_USER_NAME FROM [USER] WHERE [USER_ID] = @USER_ID
END
GO
/****** Object:  StoredProcedure [dbo].[USER_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[USER_DELETE]
@USER_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM [USER] WHERE [USER_ID] = @USER_ID
	SELECT @USER_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[USER_GET_INFO_LOGIN]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

create PROC [dbo].[USER_GET_INFO_LOGIN]
@USER_NAME     VARCHAR(200) = NULL,
@PASSWORD      VARCHAR(100) = NULL
AS
BEGIN
	SELECT *,'' AS ROLE_USER_NAME FROM [USER] WHERE [USER_NAME] = @USER_NAME AND [PASSWORD]= @PASSWORD
END
GO
/****** Object:  StoredProcedure [dbo].[USER_INSERT]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[USER_INSERT]
@USER_ID       VARCHAR(20) = NULL,
@BRANCH_ID     VARCHAR(20) = NULL,
@ROLE_USER_ID  VARCHAR(20) = NULL,
@USER_CODE     VARCHAR(20) = NULL,
@USER_NAME     VARCHAR(200) = NULL,
@USER_FULLNAME NVARCHAR(MAX) = NULL,
@EMAIL         VARCHAR(100) = NULL,
@PHONE         VARCHAR(20) = NULL,
@ADDRESS       NVARCHAR(MAX) = NULL,
@STATUS        VARCHAR(10) = NULL,
@CREATE_ID     VARCHAR(20) = NULL,
@CREATE_DATE   VARCHAR(20) = NULL
AS
BEGIN
	SET @USER_ID = (SELECT [dbo].[GEN_ID] ('USER'))
	INSERT INTO [dbo].[USER] ([USER_ID],BRANCH_ID,ROLE_USER_ID,USER_CODE,[USER_NAME],USER_FULLNAME,EMAIL,PHONE,ADDRESS,STATUS,CREATE_ID,CREATE_DATE) 
	VALUES(@USER_ID, @BRANCH_ID,@ROLE_USER_ID,@USER_CODE,@USER_NAME,@USER_FULLNAME,@EMAIL,@PHONE,@ADDRESS,@STATUS,@CREATE_ID,GETDATE())

	SELECT @USER_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[USER_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[USER_SEARCH]
@USER_ID       VARCHAR(20) = NULL,
@BRANCH_ID     VARCHAR(20) = NULL,
@ROLE_USER_ID  VARCHAR(20) = NULL,
@USER_CODE     VARCHAR(20) = NULL,
@USER_NAME     VARCHAR(200) = NULL,
@USER_FULLNAME NVARCHAR(500) = NULL,
@EMAIL         VARCHAR(100) = NULL,
@PHONE         VARCHAR(20) = NULL,
@ADDRESS       NVARCHAR(MAX) = NULL,
@STATUS        VARCHAR(10) = NULL,
@CREATE_ID     VARCHAR(200) = NULL,
@CREATE_DATE   DATETIME = NULL
AS
BEGIN
	SELECT A.*, B.ROLE_USER_NAME
	FROM [USER] A
	LEFT JOIN ROLE_USER B ON A.ROLE_USER_ID = B.ROLE_USER_ID
	WHERE (A.[USER_ID] = @USER_ID OR @USER_ID IS NULL OR @USER_ID = '')
	AND (A.BRANCH_ID = @BRANCH_ID OR @BRANCH_ID IS NULL OR @BRANCH_ID = '')
	AND (A.ROLE_USER_ID = @ROLE_USER_ID OR @ROLE_USER_ID IS NULL OR @ROLE_USER_ID = '')
	AND (A.USER_CODE = @USER_CODE OR @USER_CODE IS NULL OR @USER_CODE = '')
	AND (A.[USER_NAME] LIKE '%' + @USER_NAME + '%' OR @USER_NAME IS NULL OR @USER_NAME = '')
	AND (A.USER_FULLNAME LIKE '%' + @USER_FULLNAME + '%' OR @USER_FULLNAME IS NULL OR @USER_FULLNAME = '')
	AND (A.EMAIL LIKE '%' + @EMAIL + '%' OR @EMAIL IS NULL OR @EMAIL = '')
	AND (A.PHONE LIKE '%' + @PHONE + '%' OR @PHONE IS NULL OR @PHONE = '')
	AND (A.[ADDRESS] LIKE '%' + @ADDRESS + '%' OR @ADDRESS IS NULL OR @ADDRESS = '')
	AND (A.[STATUS] = @STATUS OR @STATUS IS NULL OR @STATUS = '')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[USER_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[USER_UPDATE]
@USER_ID       VARCHAR(20) = NULL,
@BRANCH_ID     VARCHAR(20) = NULL,
@ROLE_USER_ID  VARCHAR(20) = NULL,
@USER_CODE     VARCHAR(20) = NULL,
@USER_NAME     VARCHAR(20) = NULL,
@USER_FULLNAME VARCHAR(20) = NULL,
@EMAIL         VARCHAR(20) = NULL,
@PHONE         VARCHAR(20) = NULL,
@ADDRESS       VARCHAR(20) = NULL,
@STATUS        VARCHAR(20) = NULL,
@CREATE_ID     VARCHAR(20) = NULL,
@CREATE_DATE   VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [USER] SET BRANCH_ID = @BRANCH_ID, ROLE_USER_ID = @ROLE_USER_ID, USER_CODE = @USER_CODE,
	[USER_NAME] = @USER_NAME, USER_FULLNAME = @USER_FULLNAME, EMAIL = @EMAIL,
	PHONE = @PHONE, [ADDRESS] = @ADDRESS, [STATUS] = @STATUS, CREATE_ID = @CREATE_ID, CREATE_DATE = GETDATE()
	WHERE [USER_ID] = @USER_ID

	SELECT @USER_ID ID,'1'RESULT,'' ERRORDESC
	--INSERT INTO [dbo].[USER] (USER_ID,BRANCH_ID,ROLE_USER_ID,USER_CODE,USER_NAME,USER_FULLNAME,EMAIL,PHONE,ADDRESS,STATUS,CREATE_ID,CREATE_DATE) 
	--VALUES(@USER_ID, @BRANCH_ID,@ROLE_USER_ID,@USER_CODE,@USER_NAME,@USER_FULLNAME,@EMAIL,@PHONE,@ADDRESS,@STATUS,@CREATE_ID,@CREATE_DATE)
END
GO
/****** Object:  StoredProcedure [dbo].[WAREHOUSE_BYID]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[WAREHOUSE_BYID]
@WAREHOUSE_ID     VARCHAR(20) = NULL
AS
BEGIN
	SELECT * FROM WAREHOUSE WHERE WAREHOUSE_ID = @WAREHOUSE_ID
END
GO
/****** Object:  StoredProcedure [dbo].[WAREHOUSE_DELETE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[WAREHOUSE_DELETE]
@WAREHOUSE_ID VARCHAR(20) = NULL
AS
BEGIN
	DELETE FROM WAREHOUSE WHERE WAREHOUSE_ID = @WAREHOUSE_ID
	SELECT @WAREHOUSE_ID ID,'1'RESULT,'' ERRORDESC
END
GO
/****** Object:  StoredProcedure [dbo].[WAREHOUSE_SEARCH]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[WAREHOUSE_SEARCH]
@WAREHOUSE_ID      VARCHAR(20) = NULL,
@BRANCH_ID         VARCHAR(20) = NULL,
@AREA_ID           VARCHAR(20) = NULL,
@WAREHOUSE_CODE    VARCHAR(20) = NULL,
@WAREHOUSE_NAME    NVARCHAR(500) = NULL,
@WAREHOUSE_ADDRESS NVARCHAR(500) = NULL,
@CREATE_ID         VARCHAR(100) = NULL,
@CREATE_DATE       VARCHAR(50) = NULL
AS
BEGIN
	SELECT * 
	FROM WAREHOUSE A
	WHERE (A.WAREHOUSE_ID = @WAREHOUSE_ID OR @WAREHOUSE_ID IS NULL OR @WAREHOUSE_ID = '')
	AND (A.BRANCH_ID = @BRANCH_ID OR @BRANCH_ID IS NULL OR @BRANCH_ID = '')
	AND (A.AREA_ID = @AREA_ID OR @AREA_ID IS NULL OR @AREA_ID = '')
	AND (A.WAREHOUSE_CODE = @WAREHOUSE_CODE OR @WAREHOUSE_CODE IS NULL OR @WAREHOUSE_CODE = '')
	AND (A.WAREHOUSE_NAME = @WAREHOUSE_NAME OR @WAREHOUSE_NAME IS NULL OR @WAREHOUSE_NAME = '')
	AND (A.WAREHOUSE_ADDRESS = @WAREHOUSE_ADDRESS OR @WAREHOUSE_ADDRESS IS NULL OR @WAREHOUSE_ADDRESS = '')
	AND (A.CREATE_ID = @CREATE_ID OR @CREATE_ID IS NULL OR @CREATE_ID = '')
	AND (CONVERT(DATE,A.CREATE_DATE,103) = CONVERT(DATE,@CREATE_DATE,103) OR @CREATE_DATE IS NULL OR @CREATE_DATE = '')
END
GO
/****** Object:  StoredProcedure [dbo].[WAREHOUSE_UPDATE]    Script Date: 10/04/2023 2:53:54 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[WAREHOUSE_UPDATE]
@WAREHOUSE_ID      VARCHAR(20) = NULL,
@BRANCH_ID         VARCHAR(20) = NULL,
@AREA_ID           VARCHAR(20) = NULL,
@WAREHOUSE_CODE   VARCHAR(20) = NULL,
@WAREHOUSE_NAME    VARCHAR(20) = NULL,
@WAREHOUSE_ADDRESS VARCHAR(20) = NULL,
@CREATE_ID         VARCHAR(20) = NULL,
@CREATE_DATE       VARCHAR(20) = NULL
AS
BEGIN
	UPDATE [WAREHOUSE] SET 
	BRANCH_ID = @BRANCH_ID,
	AREA_ID = @AREA_ID,
	WAREHOUSE_CODE = @WAREHOUSE_CODE,
	WAREHOUSE_NAME = @WAREHOUSE_NAME,
	WAREHOUSE_ADDRESS = @WAREHOUSE_ADDRESS,
	CREATE_ID = @CREATE_ID,
	CREATE_DATE = CONVERT(DATETIME,@CREATE_DATE,103)

	WHERE [WAREHOUSE_ID] = @WAREHOUSE_ID

	SELECT @WAREHOUSE_ID ID,'1'RESULT,'' ERRORDESC
	--INSERT INTO [dbo].[WAREHOUSE] (WAREHOUSE_ID, BRANCH_ID,AREA_ID,WAREHOUSE_CODE,WAREHOUSE_NAME,WAREHOUSE_ADDRESS,CREATE_ID,CREATE_DATE)
	--VALUES(@WAREHOUSE_ID, @BRANCH_ID,@AREA_ID,@WAREHOUSE_CODE,@WAREHOUSE_NAME,@WAREHOUSE_ADDRESS,@CREATE_ID,@CREATE_DATE)
END










GO
USE [master]
GO
ALTER DATABASE [DB_QUANLYBANHANG] SET  READ_WRITE 
GO
